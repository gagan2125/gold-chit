import{r as n,j as e,N as H,S as B,C as G,D as R,c as N,b as u,d as J,I as K}from"./index-CVU8XVJV.js";const X=()=>{const[A,C]=n.useState([]),[x,S]=n.useState([]),[F,Q]=n.useState(""),[k,h]=n.useState(!1),[q,g]=n.useState(!1),[P,f]=n.useState(!1),[b,y]=n.useState(null),[D,U]=n.useState(null),[t,p]=n.useState({}),[$,M]=n.useState(""),I=r=>{const{value:a}=r.target;M(a)},[j,m]=n.useState({visibility:!1,message:"Something went wrong!",type:"info"}),[d,w]=n.useState({name:"",email:"",phone_number:"",password:"",address:"",pincode:"",adhaar_no:"",pan_no:""}),[o,v]=n.useState({name:"",email:"",phone_number:"",password:"",address:"",pincode:"",adhaar_no:"",pan_no:""}),i=r=>{const{name:a,value:s}=r.target;w(l=>({...l,[a]:s})),p(l=>({...l,[a]:""}))},_=r=>{const a={},s=r==="addEmployee"?d:o,l={email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,phone:/^[6-9]\d{9}$/,password:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{5,}$/,pincode:/^\d{6}$/,aadhaar:/^\d{12}$/,pan:/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/};return s.name.trim()||(a.name="Full Name is required"),s.email?l.email.test(s.email)||(a.email="Invalid email format"):a.email="Email is required",s.phone_number?l.phone.test(s.phone_number)||(a.phone_number="Invalid  phone number"):a.phone_number="Phone number is required",s.password?l.password.test(s.password)||(a.password="Password must contain at least 5 characters, one uppercase, one lowercase, one number, and one special character"):a.password="Password is required",s.pincode?l.pincode.test(s.pincode)||(a.pincode="Invalid pincode (6 digits required)"):a.pincode="Pincode is required",s.adhaar_no?l.aadhaar.test(s.adhaar_no)||(a.adhaar_no="Invalid Aadhaar number (12 digits required)"):a.adhaar_no="Aadhaar number is required",s.pan_no?l.pan.test(s.pan_no.toUpperCase())||(a.pan_no="Invalid PAN format (e.g., ABCDE1234F)"):a.pan_no="PAN number is required",s.address.trim()?s.address.trim().length<10&&(a.address="Address should be at least 10 characters"):a.address="Address is required",p(a),Object.keys(a).length===0},T=async r=>{r.preventDefault();const a=_("addEmployee");try{if(a){const s=await u.post("/agent/add-agent",d,{headers:{"Content-Type":"application/json"}});h(!1),w({name:"",email:"",phone_number:"",password:"",address:"",pincode:"",adhaar_no:"",pan_no:""}),m({visibility:!0,message:"Agent Added Successfully",type:"success"})}}catch(s){console.error("Error adding agent:",s),s.response&&s.response.data&&s.response.data.message?m({visibility:!0,message:`${s.response.data.message}`,type:"error"}):m({visibility:!0,message:"An unexpected error occurred. Please try again.",type:"error"})}};n.useEffect(()=>{(async()=>{try{const a=await u.get("/agent/get-agent");C(a.data);const s=a.data.map((l,z)=>({_id:l._id,id:z+1,name:l.name,phone_number:l.phone_number,password:l.password,action:e.jsx("div",{className:"flex justify-center  gap-2",children:e.jsx(J,{menu:{items:[{key:"1",label:e.jsx("div",{className:"text-green-600",onClick:()=>E(l._id),children:"Edit"})},{key:"2",label:e.jsx("div",{className:"text-red-600",onClick:()=>L(l._id),children:"Delete"})}]},placement:"bottomLeft",children:e.jsx(K,{className:"text-bold"})})})}));S(s)}catch(a){console.error("Error fetching user data:",a)}})()},[]);const V=[{key:"id",header:"SL. NO"},{key:"name",header:"Agent Name"},{key:"phone_number",header:"Agent Phone Number"},{key:"password",header:"Agent Password"},{key:"action",header:"Action"}];A.filter(r=>r.name.toLowerCase().includes(F.toLowerCase()));const L=async r=>{try{const a=await u.get(`/agent/get-agent-by-id/${r}`);y(a.data),g(!0),p({})}catch(a){console.error("Error fetching user:",a)}},E=async r=>{try{const a=await u.get(`/agent/get-agent-by-id/${r}`);U(a.data),v({name:a.data.name,email:a.data.email,phone_number:a.data.phone_number,password:a.data.password,pincode:a.data.pincode,adhaar_no:a.data.adhaar_no,pan_no:a.data.pan_no,address:a.data.address}),f(!0),p({})}catch(a){console.error("Error fetching user:",a)}},c=r=>{const{name:a,value:s}=r.target;v(l=>({...l,[a]:s}))},O=async()=>{if(b)try{await u.delete(`/agent/delete-agent/${b._id}`),g(!1),y(null),m({visibility:!0,message:"Agent deleted successfully",type:"success"})}catch(r){console.error("Error deleting user:",r)}},Z=async r=>{r.preventDefault();const a=_();try{if(a){const s=await u.put(`/agent/update-agent/${D._id}`,o);f(!1),m({visibility:!0,message:"Agent Updated Successfully",type:"success"})}}catch(s){console.error("Error updating agent:",s),s.response&&s.response.data&&s.response.data.message?m({visibility:!0,message:`${s.response.data.message}`,type:"error"}):m({visibility:!0,message:"An unexpected error occurred. Please try again.",type:"error"})}};return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex mt-20",children:[e.jsx(H,{onGlobalSearchChangeHandler:I,visibility:!0}),e.jsx(B,{}),e.jsx(G,{type:j.type,isVisible:j.visibility,message:j.message}),e.jsxs("div",{className:"flex-grow p-7",children:[e.jsx("div",{className:"mt-6 mb-8",children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Employees"}),e.jsx("button",{onClick:()=>{h(!0),p({})},className:"ml-4 bg-blue-800 text-white px-4 py-2 rounded shadow-md hover:bg-yellow-500 transition duration-200",children:"+ Add Employee"})]})}),e.jsx(R,{updateHandler:E,data:x.filter(r=>Object.values(r).some(a=>String(a).toLowerCase().includes($.toLowerCase()))),columns:V,exportedFileName:`Employees-${x.length>0?x[0].name+" to "+x[x.length-1].name:"empty"}.csv`})]})]}),e.jsx(N,{isVisible:k,onClose:()=>h(!1),children:e.jsxs("div",{className:"py-6 px-5 lg:px-8 text-left",children:[e.jsx("h3",{className:"mb-4 text-xl font-bold text-gray-900",children:"Add Employee"}),e.jsxs("form",{className:"space-y-6",onSubmit:T,noValidate:!0,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"email",children:"Full Name"}),e.jsx("input",{type:"text",name:"name",value:d.name,onChange:i,id:"name",placeholder:"Enter the Full Name",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.name})]}),e.jsxs("div",{className:"flex flex-row justify-between space-x-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:d.email,onChange:i,id:"text",placeholder:"Enter Email",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.email})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Phone Number"}),e.jsx("input",{type:"number",name:"phone_number",value:d.phone_number,onChange:i,id:"text",placeholder:"Enter Phone Number",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.phone_number&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.phone_number})]})]}),e.jsxs("div",{className:"flex flex-row justify-between space-x-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Password"}),e.jsx("input",{type:"text",name:"password",value:d.password,onChange:i,id:"text",placeholder:"Enter Password",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.password})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Pincode"}),e.jsx("input",{type:"number",name:"pincode",value:d.pincode,onChange:i,id:"text",placeholder:"Enter Pincode",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.pincode&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.pincode})]})]}),e.jsxs("div",{className:"flex flex-row justify-between space-x-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Adhaar Number"}),e.jsx("input",{type:"number",name:"adhaar_no",value:d.adhaar_no,onChange:i,id:"text",placeholder:"Enter Adhaar Number",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.adhaar_no&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.adhaar_no})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Pan Number"}),e.jsx("input",{type:"text",name:"pan_no",value:d.pan_no,onChange:i,id:"text",placeholder:"Enter Pan Number",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.pan_no&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.pan_no})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"email",children:"Address"}),e.jsx("input",{type:"text",name:"address",value:d.address,onChange:i,id:"name",placeholder:"Enter the Address",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.address&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.address})]}),e.jsx("button",{type:"submit",className:`w-full text-white bg-blue-700 hover:bg-yellow-500
              focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center`,children:"Add"})]})]})}),e.jsx(N,{isVisible:P,onClose:()=>f(!1),children:e.jsxs("div",{className:"py-6 px-5 lg:px-8 text-left",children:[e.jsx("h3",{className:"mb-4 text-xl font-bold text-gray-900",children:"Update Employee"}),e.jsxs("form",{className:"space-y-6",onSubmit:Z,noValidate:!0,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"email",children:"Full Name"}),e.jsx("input",{type:"text",name:"name",value:o.name,onChange:c,id:"name",placeholder:"Enter the Full Name",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.name})]}),e.jsxs("div",{className:"flex flex-row justify-between space-x-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:o.email,onChange:c,id:"text",placeholder:"Enter Email",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.email})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Phone Number"}),e.jsx("input",{type:"number",name:"phone_number",value:o.phone_number,onChange:c,id:"text",placeholder:"Enter Phone Number",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.phone_number&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.phone_number})]})]}),e.jsx("div",{className:"flex flex-row justify-between space-x-4",children:e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Pincode"}),e.jsx("input",{type:"text",name:"pincode",value:o.pincode,onChange:c,id:"text",placeholder:"Enter Pincode",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.pincode&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.pincode})]})}),e.jsxs("div",{className:"flex flex-row justify-between space-x-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Adhaar Number"}),e.jsx("input",{type:"text",name:"adhaar_no",value:o.adhaar_no,onChange:c,id:"text",placeholder:"Enter Adhaar Number",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.adhaar_no&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.adhaar_no})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Pan Number"}),e.jsx("input",{type:"text",name:"pan_no",value:o.pan_no,onChange:c,id:"text",placeholder:"Enter Pan Number",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.pan_no&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.pan_no})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"email",children:"Address"}),e.jsx("input",{type:"text",name:"address",value:o.address,onChange:c,id:"name",placeholder:"Enter the Address",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"}),t.address&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.address})]}),e.jsx("button",{type:"submit",className:`w-full text-white bg-blue-700 hover:bg-blue-800
              focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center`,children:"Update"})]})]})}),e.jsx(N,{isVisible:q,onClose:()=>{g(!1),y(null)},children:e.jsxs("div",{className:"py-6 px-5 lg:px-8 text-left",children:[e.jsx("h3",{className:"mb-4 text-xl font-bold text-gray-900",children:"Delete Employee"}),b&&e.jsxs("form",{onSubmit:r=>{r.preventDefault(),O()},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"groupName",children:["Please enter"," ",e.jsx("span",{className:"text-primary font-bold",children:b.name})," ","to confirm deletion."]}),e.jsx("input",{type:"text",id:"groupName",placeholder:"Enter the employee Full Name",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"})]}),e.jsx("button",{type:"submit",className:`w-full text-white bg-red-700 hover:bg-red-800
          focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center`,children:"Delete"})]})]})})]})})};export{X as default};
