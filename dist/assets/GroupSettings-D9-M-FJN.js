import{s as w,r as d,j as e,C as G,D as k,c as E,b as u}from"./index-CVU8XVJV.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=w("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),M=()=>{const[F,i]=d.useState([]),[n,g]=d.useState([]);d.useState("");const[x,c]=d.useState(!1),[D,y]=d.useState(null),[p,b]=d.useState(new Set),[m,h]=d.useState({visibility:!1,message:"Something went wrong!",type:"info"}),[s,f]=d.useState({group_name:"",group_type:"",group_value:"",group_install:"",group_members:"",group_duration:"",start_date:"",end_date:"",minimum_bid:"",maximum_bid:"",commission:5,reg_fee:""});d.useEffect(()=>{(async()=>{try{const r=await u.get("/group/get-group-admin");i(r.data);const a=r.data.map((t,l)=>({checkBox:e.jsx("div",{className:"flex justify-center gap-2",children:e.jsx("div",{className:"border border-red-400 text-white px-4 py-2 rounded-md shadow hover:border-red-700 transition duration-200",children:e.jsx("input",{type:"checkbox",checked:t.mobile_access,onChange:()=>_(t._id,!t.mobile_access),disabled:p.has(t._id),className:"form-checkbox h-4 w-4 text-red-600 focus:ring-0 focus:ring-offset-0 focus:outline-none checked:bg-red-600 border-gray-300 rounded"})})}),id:l+1,name:t.group_name,type:`${t.group_type.charAt(0).toUpperCase()}${t.group_type.slice(1)} Group`,value:t.group_value,installment:t.group_install,members:t.group_members,action:e.jsx("div",{className:"flex justify-center gap-2",children:e.jsx("button",{onClick:()=>j(t._id),className:"border border-green-400 text-white px-4 py-2 rounded-md shadow hover:border-green-700 transition duration-200",children:e.jsx(S,{color:"green"})})})}));g(a)}catch(r){console.error("Error fetching group data:",r)}})()},[p]);const _=async(o,r)=>{b(a=>new Set([...a,o]));try{i(t=>t.map(l=>l._id===o?{...l,mobile_access:r}:l)),await u.patch(`/group/update-mobile-access/${o}`,{mobile_access:r});const a=await u.get("/group/get-group-admin");i(a.data)}catch(a){i(t=>t.map(l=>l._id===o?{...l,mobile_access:!r}:l)),console.error("Error updating mobile access:",a),h({message:"Failed to update mobile access",type:"error",visibility:!0})}finally{b(a=>{const t=new Set(a);return t.delete(o),t})}},j=async o=>{try{const r=await u.get(`/group/get-by-id-group/${o}`),a=r.data,t=a.start_date.split("T")[0],l=a.end_date.split("T")[0];y(r.data),f({group_name:r.data.group_name,group_type:r.data.group_type,group_value:r.data.group_value,group_install:r.data.group_install,group_members:r.data.group_members,group_duration:r.data.group_duration,start_date:t,end_date:l,minimum_bid:r.data.minimum_bid,maximum_bid:r.data.maximum_bid,reg_fee:r.data.reg_fee}),c(!0)}catch(r){console.error("Error fetching group:",r)}},v=async o=>{},N=[{key:"checkBox",header:"Mobile Access"},{key:"id",header:"SL. NO"},{key:"name",header:"Group Name"},{key:"type",header:"Group Type"},{key:"value",header:"Group Value"},{key:"installment",header:"Group Installment"},{key:"members",header:"Group Members"},{key:"action",header:"Action"}];return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx(G,{type:m.type,isVisible:m.visibility,message:m.message}),e.jsx("div",{className:"flex mt-20",children:e.jsxs("div",{className:"flex-grow p-7",children:[e.jsx("div",{className:"mt-6 mb-8",children:e.jsx("div",{className:"flex justify-between items-center w-full",children:e.jsx("h1",{className:"text-2xl font-semibold",children:"Groups"})})}),e.jsx(k,{data:n,columns:N,exportedFileName:`Groups-${n.length>0?n[0].name+" to "+n[n.length-1].name:"empty"}.csv`}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8"})]})}),e.jsx(E,{isVisible:x,onClose:()=>c(!1),children:e.jsxs("div",{className:"py-6 px-5 lg:px-8 text-left",children:[e.jsx("h3",{className:"mb-4 text-xl font-bold text-gray-900",children:"Group"}),e.jsxs("form",{className:"space-y-6",onSubmit:v,noValidate:!0,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"email",children:"Group Name"}),e.jsx("input",{type:"text",name:"group_name",value:s.group_name,id:"name",placeholder:"Enter the Group Name",readOnly:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"category",children:"Group Type"}),e.jsxs("select",{name:"group_type",value:s.group_type||"",readOnly:!0,id:"category",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5",children:[e.jsx("option",{readOnly:!0,value:"",children:"Select Group Type"}),e.jsx("option",{readOnly:!0,value:"divident",children:"Dividend Group"}),e.jsx("option",{readOnly:!0,value:"double",children:"Double Group"})]})]}),e.jsxs("div",{className:"flex flex-row justify-between space-x-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Group Value"}),e.jsx("input",{type:"number",name:"group_value",value:s.group_value,id:"text",placeholder:"Enter Group Value",readOnly:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Group Installment Amount"}),e.jsx("input",{type:"number",name:"group_install",value:s.group_install,id:"text",placeholder:"Enter Group Installment Amount",readOnly:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"})]})]}),e.jsxs("div",{className:"flex flex-row justify-between space-x-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Group Members"}),e.jsx("input",{type:"number",name:"group_members",value:s.group_members,id:"text",placeholder:"Enter Group Members",readOnly:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Group Duration"}),e.jsx("input",{type:"number",name:"group_duration",value:s.group_duration,readOnly:!0,id:"text",placeholder:"Enter Group Duration",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"email",children:"Registration Fee"}),e.jsx("input",{type:"number",name:"reg_fee",value:s.reg_fee,id:"name",placeholder:"Enter the Registration Fee",readOnly:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"})]}),e.jsxs("div",{className:"flex flex-row justify-between space-x-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Start Date"}),e.jsx("input",{type:"date",name:"start_date",value:s.start_date,id:"date",placeholder:"Enter the Date",readOnly:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"End Date"}),e.jsx("input",{type:"date",name:"end_date",value:s.end_date,readOnly:!0,id:"date",placeholder:"Enter the Date",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"})]})]}),e.jsxs("div",{className:"flex flex-row justify-between space-x-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Minimum Bid %"}),e.jsx("input",{type:"number",name:"minimum_bid",value:s.minimum_bid,readOnly:!0,id:"text",placeholder:"Enter Minimum Bid",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"date",children:"Maximum Bid %"}),e.jsx("input",{type:"number",name:"maximum_bid",value:s.maximum_bid,readOnly:!0,id:"text",placeholder:"Enter Maximum Bid",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full p-2.5"})]})]})]})]})})]})})};export{M as default};
